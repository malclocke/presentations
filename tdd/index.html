<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Wholemeal Ltd: TDD - Protecting yourself from your own worst enemy</title>
<!-- metadata -->
<meta name="generator" content="S5" />
<meta name="version" content="S5 1.1" />
<meta name="presdate" content="20100212" />
<meta name="author" content="Malcolm Locke" />
<meta name="company" content="Wholemeal Ltd" />
<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<!-- style sheet links -->
<link rel="stylesheet" href="../ui/wholemeal/slides.css" type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="../ui/wholemeal/outline.css" type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="../ui/wholemeal/print.css" type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="../ui/wholemeal/opera.css" type="text/css" media="projection" id="operaFix" />
<!-- S5 JS -->
<script src="../ui/wholemeal/slides.js" type="text/javascript"></script>
</head>
<body>

<div class="layout">
<div id="controls"><!-- DO NOT EDIT --></div>
<div id="currentSlide"><!-- DO NOT EDIT --></div>
<div id="header"></div>
<div id="footer">
<h1>TDD - Protecting yourself from your own worst enemy</h1>
<h2>Chch on Rails - May 26th 2010</h2>
</div>

</div>


<div class="presentation">

<div class="slide">
<h1>TDD - Protecting yourself from your own worst enemy</h1>
<h3>Malcolm Locke</h3>
<h4>Wholemeal Ltd</h4>
</div>


<div class="slide">
<h1>TDD is ...</h1>
<ul class="incremental">
<li>Test Driven Development</li>
<li>Before you write any code, write a test for it</li>
</ul>
</div>


<div class="slide">
<h1>Why write tests?</h1>
<ul>
<li>Fewer bugs make it through to production</li>
<li>Stop looking at the browser</li>
<li>Safety net -  refactor with confidence</li>
<li>Codified documentation</li>
<li>Become the first consumer of your API</li>
</ul>
</div>


<div class="slide">
<h1>Dear Ruby on Rails users ...</h1>
<ul>
<li>You are VERY lucky!</li>
<li>Testing built into the platform</li>
<li>Testing part of the Ruby culture</li>
</ul>
</div>


<div class="slide">
<h1>Why write tests before code?</h1>
<ul>
<li>Assuming you accept writing tests is a good idea, why write them before
the code you're planning to test?</li>
</ul>
</div>


<div class="slide">
<h1>Typical project plan</h1>
<img src="traditional-plan.png"/>
</div>


<div class="slide">
<h1>Typical project reality</h1>
<img src="traditional-reality.png"/>
</div>


<div class="slide">
<h1>Principles</h1>
<ul class="incremental">
<li>Before you write any code, write a test</li>
<li>Write enough of a test (and no more) to expose a behaviour or bug, and ensure it fails</li>
<li>Write enough code (and no more) to make the test pass</li>
<li>Rinse and repeat ...</li>
</ul>
</div>


<div class="slide">
<h1>Benefits of TDD?</h1>
<ul class="incremental">
<li>Tests actually get written</li>
<li>Documentation of expected behaviour</li>
<li>Test your requirements, not wot you just writ</li>
<li>Safe refactoring</li>
</ul>
</div>


<div class="slide">
<h1>Drawbacks of TDD?</h1>
<ul class="incremental">
<li>Tests actually get written</li>
<li>Slower development pace than 'hack and hope', about the same amount of test code as 'real code'</li>
<li>Benefits not always obvious to customers or management</li>
</ul>
</div>


<div class="slide">
<h1>Types of test</h1>
<ul>
<li>Integration tests</li>
<li>Functional tests</li>
<li>Unit tests</li>
</ul>
</div>
</div>
</div>


<div class="slide">
<h1>Types of test</h1>
<div class="container rounded">
Integration tests
<div class="container rounded">
Functional tests
<div class="container rounded">
Unit tests
</div>
</div>
</div>
</div>


<div class="slide">
<h1>Unit tests</h1>
<p>Test the smallest units of code, e.g. functions / methods.</p>
<pre class="code rounded">
class Adder
  def add_it first, second
    first + second
  end
end

test "should add two numbers together" do
  assert_equal 3, @adder.add_it(1,2)
end
</pre>
</div>


<div class="slide">
<h1>Functional tests</h1>
<p>In web development, typically test a single request</p>
<pre class="code rounded">
test "should get index" do
  get :index
  assert_response :success
  assert assigns(:comments)
  assert_instance_of Array, assigns(:comments)
  assert_equal 3, assigns(:comments).count
  assert_select 'ul#comments'
  assert_select 'ul#comments li', 3
end
</pre>
</div>


<div class="slide">
<h1>Integration tests</h1>
<p>Test multiple request workflows</p>
<pre class="code rounded">
  def test_login_and_browse_site
    get "/login"
    assert_response :success

    post_via_redirect "/login", :username => users(:adm).username,
                                :password => users(:adm).password
    assert_equal '/welcome', path
    assert_equal 'Welcome admin!', flash[:notice]
  end
</pre>
</div>


<div class="slide">
<h1>Other concepts</h1>
<ul class="incremental">
<li>Mocking</li>
<li>Fixtures (dummy data)</li>
<li>Continuous integration servers - Tweet failed builds!</li>
<li>Javascript testing - jsUnit, Selenium</li>
<li>Autotest - Run tests on modified files automatically</li>
<li>BDD - Behaviour Driven Development</li>
</ul>
</div>


<div class="slide">
<h1>Thanks for listening!</h1>
<ul>
  <li>
    Twitter: <a href="http://twitter.com/malclocke">@malclocke</a>
  </li>
  <li>
    Presentation available at <a href="http://wholemeal.co.nz">http://wholemeal.co.nz/</a>
  </li>
</ul>
</div>


</div><!-- #presentation -->

</body>
</html>
